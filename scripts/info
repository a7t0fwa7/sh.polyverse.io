#!/bin/sh

SHORT_DESCRIPTION="Output basic information about your host."

whatDistro() {
	if [ -f /etc/alpine-release ]; then
		echo "alpine"
		return 0
	fi
	if [ -f /etc/centos-release ]; then
		echo "centos"
		return 0
	fi
	if [ -f /etc/lsb-release ]; then
		echo "ubuntu"
		return 0
	fi
	if [ -f /etc/fedora-release ]; then
		echo "fedora"
		return 0
	fi
	if [ -f /etc/redhat-release ]; then
		echo "rhel"
		return 0
	fi

	return 1
}


# make sure we're able to retrieve the distro release id (e.g., alpine, centos, ubuntu) and version id.
DISTRO="$(whatDistro)"
if [ $? -ne 0 ]; then
	(>&2 echo "Could not determine Linux distro. Exiting...")
	exit 1
fi
RELEASE="$(cat /etc/os-release 2>/dev/null | grep "VERSION_ID=" | cut -d "=" -f2 | tr -d '"')"
CODENAME="$(cat /etc/*-release 2>/dev/null | grep "^DISTRIB_CODENAME=" | cut -d '=' -f2 | tr -d '"')"
ARCH="$(uname -m)"

echo "#OS"
echo "#=="
echo "DISTRO=$DISTRO"
echo "RELEASE=$RELEASE"
echo "CODENAME=$CODENAME"
echo "ARCH=$ARCH"
echo
echo "#HOST"
echo "#===="
echo "WHOAMI=$(whoami)"
echo "HOSTNAME=$HOSTNAME"
