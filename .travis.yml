sudo: required
dist: xenial
before_install:
  - sudo apt update -y
  - sudo apt install -y awscli
  - export PATH=$PATH:$HOME/.local/bin
script:
  - mkdir -p ~/.local/lib && mkdir -p ~/.local/bin
  - git clone https://$PV_OAUTH_TOKEN@github.com/polyverse-security/pv ~/.local/lib/pv
  - ln -s ~/.local/lib/pv/pv ~/.local/bin/pv
  - bash build.sh
  - bash deploy.sh
env:
  global:
    - AWS_DEFAULT_REGION=us-west-2
    - secure: "T+5VS03UagOa4rikBczCO0LSw+E9uTXwXVc3V3uRHw4vTYYiCWo3OHejcrJbfwO986lgZcJpZI1/cMZqDsAJAqUwlw5q0f8LuVT5cpZjbsg01obZWU0Traq0bx4Fa5C1Acz5aSefY68Ms0VBGkDevl5zzPf17q95oDAreNeIGqJ55/5WD4ZGEBFF9j1lnGS8KF2nniKPgpoXaY/Vq0Qq+ab102KHlwn+aoj9Pyo9CPz33DqL53bPriKP5LvTinrzfideSlpN+yRgcrXDp7i8ei4KGs2KkVXI+HA6Cpy2v745A1DwoIpZ4v+PWOBEHdF73cP3U1AysEtOLulr+AgK5SZKrdbI00jobY7ocdzY6yBCk71o4ArmHU4Y1lfD+a+GlaT4H4r4GWEqeZ01PmqcOCNqS2G+JSEWRwLxw+bIeEJYUVh6HJr3IYJnEfaEkIXANTW8mYYG+YSFEDsAMMi8YXaRrUPQMyI/+UKIAW37O3m5dXqSTI7qzw/+euX5WIIMRHhY6YJLoI+9OgVwnlhhwWtFmuylCj1ffGpHSsjy+nWkNyMdfp+fEBMKKdObGk6n+Z328sn1XjJpTKm4OmcFlnvIp7R8cYLu3oxcEY5OcMmhfeN6X6AShcS7P8jwIUKAgC4C4fZPuxkNJUts4FYy/9s8Rbs6ul2h0b1rGWb09Bo="
    - secure: "TLBfG4PD8BG99P6LI9Z4l8WSVUSQYQ5ZOcPfSodFABNNA11dof+r++DRS9DGJXEZWihxDrDdg8QkR/IWq3Q2Lcgfr5pK1Bne1yqPKMNd1I55upP2+fP7DYxGWSl4yB3r9Fd63Z3XQWZFsuA7hLz9LahsSmLjwfCGT070NJKhNNMuCgFeSOsPDsy6o23gFjyiusVeWBxfdD5A6PfqUdupcVG51HReEAibbaWEOWNCukqiud66CQV1LPplwqQEUuDS4gfXbgPB45+f5+z9XPlTGnXBvA4Xg9ayoLBjohWQ6od6hHDCfJVLbUKjz3sh1q9fJf20RZtrQfYsYcy4CTnFJ9jD5a0SqARJz+9HYhJyV32zXcI+sTMzL4DjvtjR+2PmPgLE+TpcMI8s/Lisl1qI9vh979sHNUTE9E75KPtz0YFteb83Uk77HJOAMBvWZHE88ABB/l/HTGRaCo7ATwhrJmRT0Ok6z7ivocszAK5NOcg4j/rpqgGcgt3HKlA1fLrUrVHhAxXexpDv2n7pb6eN2H87E9sRY7eKh2HunhzRI3EtScClPyDFavlbvFB+pus4k+Vxuo26MxZcUCWAeKkFNvOboqfDvL096oVazzpLAl/eZZejGFeGZnd3+cUGzPl3GdZBX7I4JuGswP1j+bQA/8bG7FH3tk9k8M3wl79CzTc="
    - secure: "TiafAIRuzycBJ+KXc7eOc5+ubZTyPY4XWsa4xs8ufM8E7h7dnMtKpHPtXfQUgSL+LiAefsbtZ5tyS8mVkUBv4p5biVaUSxh9f3Pqf2bIaHMtalEe4eMApiA1fmxW5Vt7JywlZPSeeoHdY/zEV+OI/xD8Cb2dDReJKvIjQIjQ4b4IJZE6b3CgA9mdVYGbZzqUSowPRcWT5EucsKT+2TMzfqURRimlf4JbWPEVgwFVok5rIShVbMQbGtZq6TmJ1YnnXVztox28/y6/kzrGUI1YMmNyNLgUcorggWXX/qSLFTPWNgNekQ+ht+xZ0xqkUyNozByeELEWgbxdc9LnM87/X460sLRKt4sVbCBkjkcww1ULuVE85EQqo9ZIzxXNzP32ArGPPURoSFjpQ7T7DFSW1PCZugdh6eBvqT5PoeMTE+3yucfpZK1kyDxcMpLkUTz1RvTzb9nq/ZmUUjGooS6IDyj0JdV7zgriqWj6hGhU7lK9JF2nb/M98KKzLUJQZfcn5975N8//ygVGmNd1qsQGH+1n8km2UMErmBySLE0L1HOwFt/ZVkZJPxwoCox5S75kthmW/RH3iqGAmQpOK02M7jJir43gaWPLrBK1/hq5P+TIiS7SAB7roBugE8lylQ/a0kzZ11ZeT+pH5Yi5cK4NztluEJVWmyP06k84VtS9v2c="
notifications:
  slack:
    secure: "KAvYdphhJ5HZ+3ScwCBs7zMrl1I2j9afHCt49w3Kifgw5Eu3exKsHAVqX1CkpCjnFxD3GFKs1/nbflB9iC885cErHmx/Lw029Ea1DFVrLV4Fiq4O4qvrLHybyCFQRQMxPGnXj9OhTnQPlj2d8XQkaIFcGivPdzeEL+8s8G3Bm5s1zl4cA/s2CMrmMHgvOH6JwAZNTvca1SCQzX4y/f2Xk3Vg0BZk5+6y+aLzCogWPdbl2m+hfeejUVExrTxTCFTFT7y+w9m/D7OZ3vsOHPfZ4HMXgLOiy0xSRF7TvlQig1FtWiAsvZBd9jlKx4TY0lEvNbmDgV/cU9ywMHiwRNw46W/A2EJ7HEOYD2zUdMbsNDWplqODPijv3MdeCkfCHwy6e5sAyyDdr3dGW3EVDsKkvTH/vTmAElAJaOK71I+zoeVXEt3tfURjtTh4OO/ipQaSVQGNtm4Xnz1RJjGwdhXNa2gMi2jJxq4qIHD+8CsfuXKpTX17d/U+Uz/imQwzhEe2bHUhWlt7wWK9RM+amUJpXsTERSBCmtslLLh+1zT056bVZ83r1nZU1NIfHKmIzEJBUjbF4yaZIG6+pmeXer5ofi5hr36UvcXR0Ou+TiV826p0W1AyWYz5hj/bYy9jnoQIy5ZMrtU6216mAU33Xx95XQiwZU2JbbtoLaC6StnO1GQ="
